import{r as x,o as l,c as i,a as u,b as p,u as y,d as t,w as f,e as a,F as N,f as S,g as v,h as b,t as h,i as O,j as T,n as E,k as A,l as L,m as C,p as F,q as I,v as G,s as U,x as q,y as B,z as M}from"./vendor.3610b18e.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerpolicy&&(d.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?d.credentials="include":n.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(n){if(n.ep)return;n.ep=!0;const d=s(n);fetch(n.href,d)}};R();var V=(o,e)=>{for(const[s,r]of e)o[s]=r;return o};const H={},P={class:"container mx-auto"};function j(o,e){const s=x("router-view");return l(),i("div",P,[u(s)])}var z=V(H,[["render",j]]);const W={class:"p-3"},K={class:"flex"},X=t("div",{class:"flex-none text-xl text-red-700"},"Databases",-1),J=t("div",{class:"flex-grow"},null,-1),Q={class:"flex-none self-end text-purple-600"},Y=b("create database"),Z={class:"pt-3"},ee={key:0,class:"grid grid-cols-1 border-t-1 border-fuchsia-600"},te={key:0},se={setup(o){const e=p(()=>r.state.db.databases),s=p(()=>r.state.db.loading),r=y();return r.dispatch("loadDatabases"),(n,d)=>{const c=x("router-link");return l(),i("div",W,[t("div",K,[X,J,t("div",Q,[u(c,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[Y]),_:1})])]),t("div",Z,[a(s)?v("",!0):(l(),i("div",ee,[(l(!0),i(N,null,S(a(e),m=>(l(),i("div",{key:m,class:"border-b-2 border-fuchsia-600 p-1 hover:bg-purple-100"},[u(c,{to:{name:"all_docs",params:{db:m}},class:"block"},{default:f(()=>[b(h(m),1)]),_:2},1032,["to"])]))),128))]))]),a(s)?(l(),i("div",te,"loading...")):v("",!0)])}}},oe={class:"p-3"},ae=b("<\xA0Databases"),ne={class:"flex pb-3 pt-3"},re=t("div",{class:"flex-none text-xl text-red-700"},"All Documents",-1),de=t("div",{class:"flex-grow"},null,-1),ce={class:"flex-none self-end text-purple-600"},le={class:"grid grid-flow-col gap-4"},ie=b("manage"),_e=b("changes"),ue=b("create document"),pe={key:0},fe={class:"table w-full border-t-2 border-fuchsia-600"},be={class:"table-cell p-1 border-b-2 border-fuchsia-600"},he={class:"table-cell p-1 border-b-2 border-fuchsia-600"},me={class:"table w-full py-2"},ve={class:"table-row"},ge=b("<\xA0prev"),xe=b("next\xA0>"),$e={class:"pr-2"},ye={class:"pr-2"},ke={key:1},De={setup(o){const e=y(),s=O(),r=p(()=>e.state.db.all_docs),n=p(()=>s.params.db),d=p(()=>e.state.db.loading),c=p(()=>{let w=e.state.db.all_docs;return w.offset+10>w.total_rows}),m=p(()=>e.state.db.all_docs.offset==1),_=p(()=>s.query.page?parseInt(s.query.page):1);return T(_,()=>{e.dispatch("loadAllDocuments",{db:s.params.db,page:_.value})}),e.dispatch("loadAllDocuments",{db:s.params.db,page:_.value}),(w,tt)=>{const g=x("router-link");return l(),i("div",oe,[u(g,{class:"text-purple-400",to:{name:"databases"}},{default:f(()=>[ae]),_:1}),t("div",ne,[re,de,t("div",ce,[t("div",le,[u(g,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[ie]),_:1}),u(g,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[_e]),_:1}),u(g,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[ue]),_:1})])])]),a(d)?v("",!0):(l(),i("div",pe,[t("div",fe,[(l(!0),i(N,null,S(a(r).rows,$=>(l(),A(g,{class:"table-row hover:bg-purple-100",key:$._id,to:{name:$.id[0]=="_"?"ddocument":"document",params:{db:a(n),doc_id:$.id.replace("_design/","")}}},{default:f(()=>[t("div",be,h($.id),1),t("div",he,h($.rev),1)]),_:2},1032,["to"]))),128))]),t("div",me,[t("div",ve,[u(g,{class:E(["pr-2",{"pointer-events-none text-gray-500":a(m),"text-purple-600":!a(m)}]),to:{name:"all_docs",params:{db:a(n)},query:{page:a(_)-1}}},{default:f(()=>[ge]),_:1},8,["class","to"]),u(g,{class:E(["pr-2",{"pointer-events-none text-gray-500":a(c),"text-purple-600":!a(c)}]),to:{name:"all_docs",params:{db:a(n)},query:{page:a(_)+1}}},{default:f(()=>[xe]),_:1},8,["class","to"]),t("span",$e,"total rows : "+h(a(r).total_rows),1),t("span",ye,"offset\xA0:\xA0"+h(a(r).offset),1)])])])),a(d)?(l(),i("div",ke,"loading...")):v("",!0)])}}},we={key:0},Ne={key:1,class:"p-3"},Oe={class:"flex pb-3 pt-3"},Se={class:"flex-none text-xl text-red-700"},Ee=t("div",{class:"flex-grow"},null,-1),Te={class:"flex-none self-end text-purple-600"},Ae={class:"grid grid-flow-col gap-4"},Le=b("delete"),Ce={class:"overflow-x-auto overflow-y-hidden border-t-2 border-fuchsia-600 pt-2"},Fe={setup(o){const e=y(),s=O(),r=p(()=>e.state.db.document),n=p(()=>s.params.db),d=p(()=>e.state.db.loading);return e.dispatch("loadDocument",s.params),(c,m)=>{const _=x("router-link");return l(),i(N,null,[a(d)?(l(),i("div",we,"loading...")):v("",!0),a(d)?v("",!0):(l(),i("div",Ne,[u(_,{class:"text-purple-400",to:{name:"all_docs",params:{db:a(n)}}},{default:f(()=>[b("<\xA0"+h(a(n)),1)]),_:1},8,["to"]),t("div",Oe,[t("div",Se,h(a(r)._id),1),Ee,t("div",Te,[t("div",Ae,[u(_,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[Le]),_:1})])])]),t("pre",Ce,h(a(r)),1)]))],64)}}},Ie={class:"p-3"},Ge={class:"flex pb-3 pt-3"},Ue={class:"flex-none text-xl text-red-700"},qe=t("div",{class:"flex-grow"},null,-1),Be={class:"flex-none self-end text-purple-600"},Me={class:"grid grid-flow-col gap-4"},Re=b("delete"),Ve={key:0,class:"overflow-x-auto overflow-y-hidden border-t-2 border-fuchsia-600 pt-2"},He={key:1},Pe={setup(o){const e=y(),s=O(),r=p(()=>e.state.db.document),n=p(()=>s.params.db),d=p(()=>e.state.db.loading);return s.params.doc_id=`_design/${s.params.doc_id}`,e.dispatch("loadDocument",s.params),(c,m)=>{const _=x("router-link");return l(),i("div",Ie,[u(_,{class:"text-purple-400",to:{name:"all_docs",params:{db:a(n)}}},{default:f(()=>[b("<\xA0"+h(a(n)),1)]),_:1},8,["to"]),t("div",Ge,[t("div",Ue,h(a(r)._id),1),qe,t("div",Be,[t("div",Me,[u(_,{to:{name:"create_database"},class:"items-end content-end"},{default:f(()=>[Re]),_:1})])])]),a(d)?v("",!0):(l(),i("pre",Ve,h(a(r)),1)),a(d)?(l(),i("div",He,"loading...")):v("",!0)])}}};let k=window.location.origin;k.endsWith(":8001")||(k=k+"/api");const D=L.create({baseURL:k,timeout:1e3,headers:{"X-Custom-Header":"foobar"}}),je={class:"p-3"},ze=b("<\xA0Databases"),We=t("div",{class:"flex pb-3 pt-3"},[t("div",{class:"flex-none text-xl text-red-700"}," Create Database "),t("div",{class:"flex-grow"}),t("div",{class:"flex-none self-end"})],-1),Ke=t("div",null,"Name",-1),Xe={class:"pt-2"},Je={setup(o){const e=C(),s=F(""),r=()=>{s.value!=""&&D.put(`/${s.value}`).then(d=>{e.push({name:"all_docs",params:{db:s.value}})})},n=()=>{e.push({name:"databases"})};return(d,c)=>{const m=x("router-link");return l(),i("div",je,[u(m,{to:{name:"databases"}},{default:f(()=>[ze]),_:1}),We,Ke,I(t("input",{type:"text",autocomplete:"off",class:"input border border-gray-400 appearance-none rounded focus focus:border-indigo-600 focus:outline-none active:outline-none active:border-indigo-600","onUpdate:modelValue":c[0]||(c[0]=_=>s.value=_)},null,512),[[G,s.value]]),t("div",Xe,[t("button",{onClick:c[1]||(c[1]=_=>r()),class:"bg-indigo-600 hover:bg-blue-dark text-white px-2 mr-2 rounded"},"Create"),t("button",{onClick:c[2]||(c[2]=_=>n()),class:"bg-indigo-600 hover:bg-blue-dark text-white px-2 rounded"},"Cancel")])])}}},Qe=[{name:"databases",path:"/",component:se},{name:"create_database",path:"/create",component:Je},{name:"all_docs",path:"/:db/_all_docs",component:De},{name:"ddocument",path:"/:db/_design/:doc_id",component:Pe},{name:"document",path:"/:db/:doc_id",component:Fe}],Ye=U({history:q(),routes:Qe});var Ze={state:()=>({databases:[],all_docs:{},document:{},loading:!1}),mutations:{SET_DATABASES(o,e){o.databases=e},SET_DOCUMENTS(o,e){o.all_docs=e},SET_DOCUMENT(o,e){o.document=e},SET_LOADING_ON(o){o.loading=!0},SET_LOADING_OFF(o){o.loading=!1}},actions:{loadDatabases({commit:o}){o("SET_LOADING_ON"),D.get("/_cat/dbs").then(e=>{o("SET_DATABASES",e.data),o("SET_LOADING_OFF")})},loadAllDocuments({commit:o},{db:e,page:s}){o("SET_LOADING_ON"),D.get(`/${e}/_all_docs?page=${s}`).then(r=>{o("SET_DOCUMENTS",r.data),o("SET_LOADING_OFF")})},loadDocument({commit:o},{db:e,doc_id:s}){o("SET_LOADING_ON"),D.get(`/${e}/${s}`).then(r=>{o("SET_DOCUMENT",r.data),o("SET_LOADING_OFF")})}}};const et=B({modules:{db:Ze}});M(z).use(Ye).use(et).mount("#app");
